<div class="product-collage page-width">
    <div class="collage-banner">
        {%- if section.settings.collage_banner != blank -%}
            <img srcset="{%- if section.settings.collage_banner.width >= 375 -%}{{ section.settings.collage_banner | image_url: width: 375 }} 375w,{%- endif -%}
                {%- if section.settings.collage_banner.width >= 750 -%}{{ section.settings.collage_banner | image_url: width: 750 }} 750w,{%- endif -%}
                {%- if section.settings.collage_banner.width >= 1100 -%}{{ section.settings.collage_banner | image_url: width: 1100 }} 1100w,{%- endif -%}
                {%- if section.settings.collage_banner.width >= 1500 -%}{{ section.settings.collage_banner | image_url: width: 1500 }} 1500w,{%- endif -%}
                {%- if section.settings.collage_banner.width >= 1780 -%}{{ section.settings.collage_banner | image_url: width: 1780 }} 1780w,{%- endif -%}
                {%- if section.settings.collage_banner.width >= 2000 -%}{{ section.settings.collage_banner | image_url: width: 2000 }} 2000w,{%- endif -%}
                {%- if section.settings.collage_banner.width >= 3840 -%}{{ section.settings.collage_banner | image_url: width: 3840 }} 3840w,{%- endif -%}
                {%- if section.settings.collage_banner.width >= 3000 -%}{{ section.settings.collage_banner | image_url: width: 3000 }} 3000w,{%- endif -%}
                {{ section.settings.collage_banner | image_url }} {{ section.settings.collage_banner.width }}w" 
                sizes="100vw" src="{{ section.settings.collage_banner | image_url: width: 1500 }}" 
                loading="lazy" 
                alt="{{ section.settings.collage_banner.alt | escape }}" 
                width="{{ section.settings.collage_banner.width }}" 
                height="{{ section.settings.collage_banner.width | divided_by: section.settings.collage_banner.aspect_ratio }}"
            >
        {%- endif -%}
    </div>
    <div class="products">
    {% render 'collection-slider' 
    , collection_title: block.settings.title
    , collection_color_scheme: block.settings.color_scheme
    , products: section.settings.collection.products
    %}
    </div>
</div>

{% schema %}
{
  "name": "Product Collage",
  "class": "section",
  "tag": "section",
  "settings": [
    {
      "type": "image_picker",
      "id": "collage_banner",
      "label": "Upload Collage Banner"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Product Collection"
    }
  ]
}
{% endschema %}